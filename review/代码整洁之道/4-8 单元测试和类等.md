# 单元测试、类、系统、迭进

![](https://i.loli.net/2019/07/05/5d1eaaffd4f3d23282.jpg)

## 单元测试

测试非常重要，因为它保证和增强了生产代码的可扩展性、可维护性和可复用性。

TDD三定律
1. 在编写不能通过的单元测试前，不可编写生产代码
2. 只可编写刚好无法通过的单元测试，不能编译也算不通过
3. 只可编写刚好足以通过当前失败测试的生产代码

每个测试一个断言
```
public void testGetPage thows Exception{
    givenPages("PageOne");
    whenRequstIsIssued("root");
    thenResponseShouldBe();
}
```

F.I.R.S.T 准则

1. 快速 Fast。测试应该能够快速运行。
2. 独立 Independent。测试应该相互独立，某一个测试不应该为下一个测试设定条件。
3. 可重复 repeatable。测试应当可在任何环境中重复通过。
4. 自足验证 Self-Validating。测试应该有布尔值输出，无论是通过或者失败，都不应该查看日志文件来确认测试是否通过。
5. 及时 Timely。测试应该及时编写。单元测试应该恰好在使其通过的生产代码之前编写。

## 类
SRP

单一权责原则认为，类或模块应有且只有一条加以修改的理由。

内聚

类应该只有少量实体变量。类中的每个方法都应该操作一个或多个这种变量。通常而言，方法操作的变量越多，就越黏聚到这个类上。

在实际使用中，如果一组方法所使用的实体变量数量增加，应当尝试将这些变量和方法分拆到两个或多个类中，让新的类更为内聚。

## 系统
软件系统应将启始过程和启始过程之后的运行时逻辑分离开，在启始过程中构建应用对象，也会存在互相纠缠的依赖关系。

## 迭进
简单设计规则
1. 运行所有测试
2. 不可重复
3. 表达了程序员的意图
4. 尽可能减少类和方法的数量

## 文献
《代码整洁之道》 